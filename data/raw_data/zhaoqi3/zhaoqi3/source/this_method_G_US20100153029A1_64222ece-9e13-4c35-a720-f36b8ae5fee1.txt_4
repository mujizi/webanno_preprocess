[0155] Where there are more than two stratified liquid sublayers, this process can be repeated in iterative fashion to successively measure any number of sublayers.
[0156] In one variation, to achieve even greater spatial resolution, sweep offset and gain may be optimized not only for collection of samples substantially within the region bounded by the probe top and the probe bottom as described above with reference to FIG. 3, but such optimization of sweep offset and gain may progressively target narrower subregions with each successive iteration as will be described below.
[0157] Referring to FIG. 11, this is a flowchart illustrating this method in further detail. The method in the flowchart of FIG. 11 is described in more general terms based on an example in which there are one or more known-unknown layer interfaces. The method described with reference to the flowchart of FIG. 11 may, for example, be employed for dielectric-constant-insensitive measurement of layer height in the context of the example shown in FIGS. 6 and 7 in which there is a multiple-liquid layer height profile 810.
[0158] At block 310, a transmission line containing a cable 120 and a TDR probe 110 as shown in FIG. 1 or FIG. 3 is scanned to obtain an impedance-versus-time trace as shown in FIG. 6, except that because sweep gain and offset have not yet been optimized, the trace obtained is not bounded to any particular region and will in general extend well beyond the probe top and the probe bottom.
[0159] At block 320, the transition detection module 232 detects impedance transitions representing boundaries of a region having a known total length and containing at least two subregions. For example, on a first pass through the loop that begins with block 320, the transitions corresponding to the probe top and the probe bottom might be detected. The impedance transitions represented by the probe top and the probe bottom bound the region of the TDR probe 110, which has known total length L. Furthermore, the region bounded by the probe top and the probe bottom contains at least two subregions, these being, for example, a subregion of length L1 and a subregion of length L2 as shown in FIG. 7.