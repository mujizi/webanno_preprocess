[0093] Another approach has been developed for calibrating the ballast scanning vehicle that eliminates the steps of placing and retrieving target blocks or other markers. An embodiment of this method is outlined in the flowchart of FIG. 16. This method allows the ballast scanning vehicle to be calibrated at any desired location simply by driving the scanning vehicle at a sufficiently slow speed, which can be termed a calibration speed or calibration threshold speed, for a sufficient distance. By the nature of the scanning and data collection process this condition naturally occurs at the beginning and ending of all crossings, meaning that multiple calibration sections can be established and calibration processes undertaken during any data collection run, even an extended run. Thus, the calibration process can be repeated as often as desired before and between scanning runs, especially where conditions change. For example, the height or thickness of rail varies across railroad systems. Accordingly, whenever and wherever the operator of the ballast profiling vehicle notices a change in rail size, the calibration process can be repeated before continuing with the standard scanning and profiling process.
[0094] As shown in FIG. 16, the first step in this method is for the ballast scanning vehicle to drive a section of track that will become a calibration area, indicated at block 1610. Calibration areas can be established by any regions in which the ballast scanning vehicle is driven sufficiently slowly for the LIDAR scanning systems to develop a volume of high resolution data for a relatively short length of track. Ordinarily, the calibration area is not specifically selected. Instead, the operator of the ballast scanning vehicle collects all scan data along an assigned section of track, and the computer processor analyzes all of the data and determines areas (by speed and length) that satisfy the requirements to be viewed as calibration areas. It will be apparent that the calibration speed for producing these results can depend at least in part on the scanning frequency of the LIDAR systems, and upon other factors such as the processing speed of the associated computer controller. In one embodiment, using a scanning system having the speed characteristics discussed above, it has been found that driving the scanning vehicle at a calibration speed of no more than 3 or 4 mph for a distance of about 6 to 10 feet can provide adequate data for calibration purposes. Other calibration distances can also be used. Advantageously, the operator of the vehicle is not required to stop at the beginning or end of the calibration procedure, but merely drives the vehicle at the slower speed for the given distance, such as at road crossings or other areas where slower speeds are typical, and can then resume scanning at the normal scanning speed.
[0095] The data obtained during the calibration run is then processed to extract the ties following several general principles, which are outlined in FIG. 16. Measurements between the lidar and the ground will be deemed to have a positive value, such that if measurements have a negative algebraic sign, the absolute value should be used. The first data processing step is to establish a Rolling Median Average (RMA) of the heights to ground in the space between the rails, referred to as the "crib," as indicated at block 1612. At this point in the process, these height to ground measurements will include both heights to tie tops and heights to the top of the ballast, since the two types of data have not yet been distinguished. Each scan line S is then compared in isolation to the RMA, as indicated at block 1614. This process includes several sub-steps. The first of these sub-steps is to find the average height (AH) of the points for the scan line S, as indicated at block 1616. Next, a Smaller Than Median (STM) subtotal is found, as indicated at block 1618. The STM subtotal is the sum of all points in S that have a lesser height value than the RMA.
[0096] Next, the RMA is updated with all points that are within a selected tolerance, as indicated at block 1620. The tolerance is used to reject wildly out-of-range points, like those that may represent vegetation. The next step is to compute the average of all STM values for all scans, as indicated at block 1622. This value is called STMA. At this point, a subset of all scans, called Scans On Track (SOT) are all scans with an STM value that is closer to the LIDAR in distance than the STMA height value, as indicated at block 1624. Each scan S that is a member of SOT is believed to be a scan that is on a tie, while the others are not. In other words, portions of the set of data points having a median average height that is deeper into the ground are recognized as representing regions of ballast, since individual scan beams will have much greater variation in height where there is ballast than where ties are located. This is because where there is ballast, some individual scan beams will hit the top surfaces of ballast rocks, while others will penetrate deeper into gaps between the ballast rocks, thus giving a lower average height of ground for data in the ballast region. On the other hand, portions of the set of data points having a median average height that is higher can be recognized as representing tie top surfaces because the tops of ties have fewer gaps that allow deeper penetration of the scan beams. With this information, the height to the tie at that location can be computed in the manner previously described by using only the points from scans from SOT, as indicated at block 1626.
[0097] Once the ballast scanning system is calibrated, its accuracy in estimating the amount of ballast involves registering the geometry of the ideal profile to the actual geometry of the scene, as discussed above. It is desirable that the ideal profile is matched to the tops of the ties with a relatively tight tolerance in order to be representative of all ties. However, because the ballast scanning vehicle is in constant motion, it is desirable to also account for the motion of the scanning vehicle. This motion includes up and down motion (e.g. due to the suspension of the vehicle and slight variation in relative elevation of opposite rails), cross track motion (i.e. the hi-rail vehicle wheels sliding back and forth or oscillating slightly upon the rail tops as they roll) and roll motion of the vehicle (e.g. due to the suspension of the scanning vehicle and its load).