[0079] Conversely, if the available bandwidth measurement is not complete, processing will pass again to either block 332 or 334. Processing may continue to loop back to decision block 324 until a measurement is completed or may simply wait at decision block 324 until the measurement is completed.
[0080] The above described processing uses a measurement of available bandwidth to set transmission parameters for a data stream. While any suitable method for measuring available bandwidth may be used, a desirable approach is that referred to as the "probe gap" approach for measuring available bandwidth. The probe gap approach measures available bandwidth by transmitting multiple "probes." Each probe may be a packet of relatively small size, such as a packet with a 20 byte payload. By examining the one way delay associated with each probe, the percentage of the packets that is not delayed by other network traffic may be identified. This percentage is used as an indication of the amount of idle time on the network link. By multiplying the percentage of idle time on a network link by the total capacity of that link, the available bandwidth is computed.
[0081] FIG. 4 is a flow chart of a process of measuring bandwidth using a probe gap approach. In the software architecture of FIG. 1B, this process may be implemented by probe module 184B and probe agent 184A, with blocks 414, 416, 418, 420, 422, 424 and 426 performed within probe agent 184A. Blocks 410, 412 and 428 may be performed within probe module 184B. However, the process of FIG. 4 may be used in connection with any suitable software architecture.
[0082] The process of FIG. 4 begins at block 410 where probing packets are formed. Each probing packet includes a relatively small payload so that the probing packets have only a very small impact on the available network bandwidth that is being measured. Each packet includes a time stamp identifying the time at which the packet is transmitted. At block 410, multiple probing packets are generated so that the data collected using the probing packets is representative of average operating conditions on the network. For example, 200 probing packets may be sent over a five-second interval. The packets may be Poisson-spaced. In some embodiments, each probe may be a small bunch of packets, such as two or three packets.
[0083] Regardless of the specific format of the probing packets, the process proceeds to block 412 where the packets are sent.