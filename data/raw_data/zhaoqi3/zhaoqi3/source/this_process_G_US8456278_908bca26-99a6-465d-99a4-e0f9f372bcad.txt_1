When an integration device is enrolling a Protocol #1 sensor, using a predetermined tamper transmission method, it may be desirable to require that the integration device receive two separate groups of transmissions (for two separate tamper events) within a brief period of time (4 seconds for example)--for example, a trip/restore or a restore/trip. This may be done because Protocol #1 does not inform in one packet whether or not the tamper "just" opened. It only tells us that the tamper "is" open. A set of packets showing tamper open could have been elicited by some other input (like reed switch or external contact changing states). As such, the only way to be absolutely sure that the installer meant to enroll that sensor may be by requiring the double event.
Additional processes may be performed to allow enrollment of a sensor-transmitter into a Protocol #2 system control device, regardless of whether a Protocol #1 sensor transmitter is enrolled into the integration device with a tamper trip/restore or a restore/trip. If a trip/restore is used, the sensor-transmitter may be enrolled into the integration device, and then the integration device may then send a special set of packets the F3 bits set (assuming this is what the Protocol #2 system control device requires for enrollment). The integration device may then send another set of packets with the F3 clear (because this is the correct actual state of the sensor). All this may be done to allow an installer to conveniently enroll sensor-transmitters into the integration device and system control device in one step.
Next, at step 430, the wireless transmission in Protocol #2 made by the integration device is detected and received by the system control device, and the existing sensor-transmitter being enrolled is enrolled into the system control device. As part of this process, the system control device recognizes the transmission as being the predefined type (tamper, for example) that is intended for the enrollment process, and responds accordingly to enroll the sensor-transmitter that was triggered to transmit the predetermined transmission. The enrollment process includes storing, in enrollment data memory for the system control device, a 20-bit device identifier code (bits B16-B35 of protocol #2 in FIG. 2B), and a device type for the sensor-transmitter. This 20-bit device identifier code may be formulated by the integration device from the 24-bit device identifier included in the existing sensor-transmitter device identifier code (bits B16-B39 of protocol #1 in FIG. 2A). In alternative implementations, the integration device could have a series of factory programmed 20-bit IDs that it uses as sensor-transmitters are enrolled, or the integration device may generate random IDs itself, for example, when a sensor is enrolled.
The device type for a Protocol #1 sensor-transmitter, for example, is specified in the enrollment data memory 330 of the integration device, and so that information may be encoded in the transmission sent by the integration device and received by the system control device using Protocol #2 in device type bits B36-B39. The device type is used by the system control device so that the system control device knows how to interpret data provided in a transmission from a sensor-transmitter during system operation. That is because for different sensor types, the sensor state information means different things, as discussed previously.
If the sensor-transmitter being enrolled is a Protocol #2 sensor-transmitter 104 (FIG. 1), as indicated at decision box 426 in the flow diagram, then the integration device is not involved in the enrollment process. In this case, the system control device, at step 430, detects and receives the transmission using Protocol #2 of the sensor-transmitter directly, and determines that its tamper bits B48 and B49 are high, thus indicating a predetermined transmission triggered for the enrollment process. That indicates that the sensor-transmitter that made the transmission is to be enrolled, and the device identifier code bits B16-B35 as well as the device type information in bits B36-B39 are stored in the system control device's enrollment memory.