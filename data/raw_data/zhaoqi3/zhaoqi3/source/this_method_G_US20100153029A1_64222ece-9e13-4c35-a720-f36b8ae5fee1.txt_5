[0163] At block 350, the time domain length (height) of the known layer is obtained by analyzing the impedance-versus-time trace.
[0164] At block 355, the time domain length (height) obtained at block 350 for the known layer is scaled using the convert module 226 based on the known dielectric constant of that layer, as set at the set module 284 if known in advance or as measured by the impedance-based module 222 or the time-based module 224 under the control of the measure module 286, to obtain a space domain length (height) for the known layer.
[0165] At block 360, the unknown layer module 288 derives the height of the unknown layer by subtracting the space domain height of the known layer as determined at block 355 from the known total length of the region bounded by the impedance transitions detected at block 320. In the event that the region having known total length that was detected at block 320 contains three or more subregions, it is a minor variation on the foregoing to set or measure dielectric constant for as many known subregions as necessary at block 355 so that there is exactly one remaining unknown subregion for which dielectric constant need not be measured directly but is rather determined indirectly by process of elimination. Inasmuch as TDR is not employed to directly measure the height of the unknown subregion but the height of the unknown subregion is instead derived from the known height of the region and the measured height(s) of the known subregion(s), this method can be said to be insensitive to the dielectric constant of the unknown subregion.
[0166] Thereafter, processing may return to block 320 and the loop may be repeated as many times as necessary to determine heights of as many layers and/or sublayers as can be resolved. Typically it will be the unknown layer whose height has been determined at block 360 during one pass through the loop that becomes the region having known total length and containing at least two subregions at block 320 of the next pass through the loop.
[0167] Thus, referring to FIG. 7, during a first pass through the loop, sweep offset and gain might be optimized for collection of samples within the region of the TDR probe 110 of known length L at block 330, an air-liquid interface representing the transition between an air layer of height L1 and a liquid layer of height L2 might be detected at block 340, the air layer of height L1 might be taken to be the subregion of known dielectric constant and the liquid layer of height L2 might be taken to be the subregion of unknown dielectric constant, with the time domain height of the air layer being measured by TDR at block 350 and converted to a space domain height L1 for the air layer at block 355, which is then subtracted from the known length L of the TDR probe 110 to derive the height L2 of the liquid layer at block 360.