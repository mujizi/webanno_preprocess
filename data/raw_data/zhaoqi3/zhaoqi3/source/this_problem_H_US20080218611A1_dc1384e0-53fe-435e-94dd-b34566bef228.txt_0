[0013]Through-the-lens" autofocus systems are very accurate since they measure focus quality directly from autofocus images captured with the high quality taking lens. Unfortunately, "through-the-lens" autofocus systems can be relatively slow in determining a focus setting due to the large number of autofocus images that must be captured and compared. For example, "through-the-lens" autofocus systems can take as long as 0.5-2.0 seconds to determine focus conditions.
[0014]Accordingly, in some digital cameras, the two types of autofocus systems are used together in a hybrid system in which the rangefinder based autofocus system is used to provide a fast estimation of the adjustable focus lens location that is then followed by the use of the "through-the-lens" autofocus system to refine the focus setting. For example, U.S. Pat. No. 6,864,474, entitled "Focusing Apparatus for Adjusting Focus of an Optical Instrument" and which issued Mar. 8, 2005 in the name of Misawa, describes the coordinated use of a rangefinder-based autofocus system with a "through-the-lens" autofocus system. In Misawa, the focus position of the adjustable focus taking lens is determined by both the rangefinder-based autofocus system and the "through-the-lens" autofocus system. The difference between the adjustable focus taking lens position determined by the rangefinder-based autofocus system and the adjustable focus taking lens position determined by the "through-the-lens" autofocus system is stored for future reference. In subsequent image capture episodes, the stored difference information is used to refine the number of autofocus images captured and analyzed by the "through-the-lens" autofocus system in the "hill climb" method to determine the adjustable focus lens position for best focus, thereby reducing the number of autofocus images captured and processed in cases where the rangefinder system is accurate and increasing the number of autofocus images captured and processed in cases where the rangefinder is inaccurate. However, the method described by Misawa assumes that the performance of the rangefinder, adjustable focus taking lens system and control system are consistent over time, do not fluctuate with variations in environmental conditions, and do not otherwise change or drift over time.
[0015]Once an image is in focus, the "hill climb" method typically operates over incremental distances near the subject presently focused upon. Then, in refocusing an image, the "hill climb" method typically determines whether any lens movement is stepping "up or down the hill" and resets the lens for a new maximum. In practice, this means that, if the lens movement is stepping "down the hill", the lens motion is immediately reversed so as to seek the new maximum for the existing subject. This is a particular problem in video focusing, where a new subject at some distance away from the present subject may come into the image and never be detected by the "hill climb" method--even where the new subject may present a greater "hill" in terms of contrast values. One way of responding to this problem is referred to as "whole way" autofocusing, where the auto focus module looks over all the distances discernible by the taking lens before deciding upon a focus position.
[0016]Commonly assigned U.S. Pat. No. 6,441,855 describes a "whole-way" autofocusing method, where a focusing device includes a movable focusing lens adapted to be moved to different positions across the entire focusing range, a conversion element for converting light incident on and transmitted through the focusing lens into a signal, and a lens driving mechanism for moving the focusing lens. The focusing device further includes a focus evaluation value calculation unit for calculating a focus evaluation value for each position of the focusing lens based on the signal from the conversion element. The focus evaluation value calculation unit extracts only the signals corresponding to the pixels in a focus area defined, e.g., at the center of an image, which is further divided into nine "tiles", that is, blocks that are obtained by dividing the focus area into a small number of rows and columns used as observation areas.
[0017]In calculating the focus evaluation values, a determination is first made as to whether or not the calculation of the focus evaluation values has been repeated a certain number of times, e.g., ten times, for different distance settings. When the determination is negative, the focusing lens is moved by a preset step width, and the calculation is repeated. Thus, the focusing lens is always moved stepwise from an infinite far position to a nearest position, and for each step of movement, a focus evaluation value is calculated for each tile. These calculations are performed for the respective tiles, to thereby obtain the focus evaluation values for ten lens positions for each of the nine tiles, including all of the peaks that are found across the total distance. Using the ten total sums obtained for the respective lens positions as the focus evaluation values, the focusing lens position producing the maximum peak is determined as the in-focus lens position. A lens driving output is then applied to the lens driving mechanism so that the lens moves to the determined in-focus position.